# Intorduction

这是一个关于游戏的面试题，题目中提到了一个 OXO 系列游戏，这个游戏是一个类似于井字棋的游戏，但是规则可能有所不同。题目中提到了一些关于游戏的 API 的设计，包括玩家管理系统、游戏房间管理系统、无尽挑战系统、游戏日志收集器和支付处理系统。这些 API 都是基于 RESTful 风格的，需要实现一些基本的功能，比如列出所有玩家、新增玩家、列出所有游戏房间、新增游戏房间、列出所有预约、新增预约等等。这些 API 都需要提供详细的文档，包括请求和响应的示例。另外，还需要实现一些逻辑，比如无尽挑战系统中的挑战逻辑，支付处理系统中的支付逻辑等等。这些 API 需要提供单元测试和集成测试，确保功能完备且稳定。

## 任務

使用 Golang 编写 RESTful API，用于管理 OXO 系列游戏中的玩家和等级、游戏房间和预约、无尽挑战、游戏日志和支付处理。

## API 開發挑戰

請使用 Golang 或 OpenResty 創建一個 API 服務器，並撰寫 `Dockerfile` 和 `docker-compose.yml`，確保專案能夠通過運行 `docker-compose up -d` 啟動。假設需求資料庫或附屬應用，請將其加在 `docker-compose.yml` 中。

### 1. 玩家管理系統 (Player Management System)

您的任務是設計並實現一個 RESTful API，用於管理 OXO 系列遊戲中的玩家和等級。

**要求**：

1. Endpoint
   - `/players`:
     - `GET`: 列出所有玩家，返回 JSON 格式的清單，包含每個玩家的 ID、名稱、等級等資訊。
     - `POST`: 註冊一個新玩家，接收 JSON 格式的請求，包含玩家的名稱和等級。返回新玩家的 ID。
   - `/players/{id}`:
     - `GET`: 獲取特定 ID 的玩家詳細資訊。
     - `PUT`: 更新特定 ID 的玩家資訊。
     - `DELETE`: 刪除特定 ID 的玩家。
   - `/levels`:
     - `GET`: 列出所有等級，返回 JSON 格式的清單，包含每個等級的 ID 和名稱。
     - `POST`: 新增一個等級，接收 JSON 格式的請求，包含等級名稱。返回新等級的 ID。

**答題提示**：

1. 確保 API 設計遵循 RESTful 原則，結構清晰。
2. 使用合適的 HTTP 狀態碼來表示操作結果。
3. 提供詳細的 API 文檔，包括示例請求和回應。
4. 測試您的 API，確保其功能完備且穩定。

### 2. 遊戲房間管理系統 (Game Room Management System)

您的任務是設計並實現一個 RESTful API，用於管理 OXO 系列遊戲中的遊戲房間和預約。

**要求**：

1. Endpoint
   - `/rooms`:
     - `GET`: 列出所有遊戲房間，返回 JSON 格式的清單，包含每個房間的 ID、名稱、狀態等資訊。
     - `POST`: 新增一個遊戲房間，接收 JSON 格式的請求，包含房間名稱和描述。返回新房間的 ID。
   - `/rooms/{id}`:
     - `GET`: 獲取特定 ID 的房間詳細資訊。
     - `PUT`: 更新特定 ID 的房間資訊。
     - `DELETE`: 刪除特定 ID 的房間。
   - `/reservations`:
     - `GET`: 查詢遊戲房間預約，接收以下查詢參數：
       - `room_id`：（可選）指定要查詢的房間 ID，若未提供則查詢所有房間的預約。
       - `date`：（可選）指定查詢的日期。
       - `limit`：（可選）指定最多返回的預約條數。
     - 返回 JSON 格式的預約結果，包含每個預約的 ID、房間 ID、日期、時間和玩家資訊。
     - `POST`: 新增一個遊戲房間預約，接收 JSON 格式的請求，包含房間 ID、日期、時間和玩家資訊。返回新預約的 ID。

**答題提示**：

1. 確保 API 設計簡單易用，並且提供豐富的過濾和查詢功能。
2. 提供詳細的 API 文檔，包括示例請求和回應。
3. 測試您的 API，確保其功能完備且穩定。
4. 使用單元測試和集成測試來驗證您的邏輯和 API 功能。

### 3. 無盡挑戰系統 (Endless Challenge System)

您的任務是設計並實現一個 RESTful API，用於管理 OXO 系列遊戲中的無盡挑戰。

**要求**：

1. Endpoint

   - `/challenges`:
     - `POST`: 玩家參加挑戰，接收 JSON 格式的請求，包含玩家 ID 和支付金額（固定為 20.01）。返回挑戰參加狀態。
   - `/challenges/results`:
     - `GET`: 列出最近的挑戰結果，返回 JSON 格式的清單，包含每次挑戰的 ID、玩家 ID、是否贏得獎池等資訊。

2. 邏輯
   - 每次挑戰持續 30 秒，每分鐘可以參加一次。
   - 每次參加挑戰需支付 20.01 金額。
   - 30 秒後，挑戰者有 1% 的機會贏取獎池內的全部獎金。
   - 挑戰可以持續進行，玩家參加越多次，贏得獎金的機率越大。

**答題提示**：

1. 確保 API 設計簡單易用，並且能夠處理高頻率的挑戰請求。
2. 提供詳細的 API 文檔，包括示例請求和回應。
3. 測試您的 API，確保其功能完備且穩定。
4. 使用單元測試和集成測試來驗證您的邏輯和 API 功能。

### 4. 遊戲日誌收集器 (Game Log Collector)

您的任務是設計並實現一個 RESTful API，用於記錄 OXO 系列遊戲中玩家的每筆操作。

**要求**：

1. Endpoint
   - `/logs`:
     - `GET`: 查詢遊戲日誌，接收以下查詢參數：
       - `player_id`：（可選）指定要查詢的玩家 ID，若未提供則查詢所有玩家的日誌。
       - `action`：（可選）指定要查詢的操作類型。
         - 註冊
         - 登入
         - 登出
         - 進入房間
         - 退出房間
         - 參加挑戰
         - 挑戰結果
       - `start_time`, `end_time`：（可選）指定查詢的時間範圍。
       - `limit`：（可選）指定最多返回的日誌條數。
     - 返回 JSON 格式的日誌結果，包含每筆操作的 ID、玩家 ID、操作類型、時間戳和詳細資訊。
     - `POST`: 新增一筆遊戲操作日誌，接收 JSON 格式的請求，包含玩家 ID、操作類型和詳細資訊。返回新日誌的 ID。

**答題提示**：

1. 確保 API 設計簡單易用，並且提供豐富的過濾和查詢功能。
2. 提供詳細的 API 文檔，包括示例請求和回應。
3. 測試您的 API，確保其功能完備且穩定。
4. 使用單元測試和集成測試來驗證您的邏輯和 API 功能。

### 5. 支付處理系統 (Payment Processing System)

您的任務是設計並實現一個 RESTful API，用於處理 OXO 系列遊戲中的各種支付方式，包括信用卡、銀行轉帳、第三方支付和區塊鏈支付。

**要求**：

1. Endpoint

   - `/payments`:
     - `POST`: 處理支付，接收 JSON 格式的請求，包含支付方式（信用卡、銀行轉帳、第三方支付、區塊鏈支付）、支付金額和支付詳情。返回支付結果，包括支付狀態和交易 ID。
   - `/payments/{id}`:
     - `GET`: 獲取特定支付的詳細資訊。

2. 支付處理邏輯
   - 根據不同的支付方式，調用不同的支付服務：
     - 信用卡支付：模擬調用信用卡支付網關。
     - 銀行轉帳：模擬調用銀行轉帳服務。
     - 第三方支付：模擬調用第三方支付平台。
     - 區塊鏈支付：模擬調用區塊鏈支付網關。
   - 支付成功後，返回交易 ID。
   - 支付失敗時，返回錯誤信息。

**答題提示**：

1. 確保 API 設計簡單易用，並且安全性高。
2. 提供詳細的 API 文檔，包括示例請求和回應。
3. 測試您的 API，確保其功能完備且穩定。
4. 使用單元測試和集成測試來驗證支付邏輯和 API 功能。
